function Viewi(){var e=this,n={},t={},o={},r=/^\s*|\s*$/g,i=/;$/g,s={onViewiUrlChange:null};"img,embed,object,link,script,audio,video,style".split(",").each(function(e){o[e]=!0});var a=[],c=new Router;this.componentsUrl=VIEWI_PATH+"/components.json"+VIEWI_VERSION,this.components={};var d=document.createElement("a"),l=!1,p=null,u=function(e){return d.href=e,d.pathname},f=function(){for(var e in o)for(var n=document.getElementsByTagName(e),t=0;t<n.length;t++)a.push(n[t])},h=function(){e.components._meta.tags.split(",").each(function(e){n[e]=!0}),e.components._meta.boolean.split(",").each(function(e){t[e]=!0}),e.components._routes.each(function(e){c.register(e.method,e.url,e.component)}),p=e.components._config,f(),l=!0,e.go(location.href,!1)};this.getConfig=function(){return p},this.start=function(){"undefined"!=typeof onViewiUrlChange&&"function"==typeof onViewiUrlChange&&(s.onViewiUrlChange=onViewiUrlChange),"undefined"!=typeof ViewiPages?(e.components=JSON.parse(ViewiPages),h()):ajax.get(this.componentsUrl).then(function(n){e.components=n,h()}),document.addEventListener("click",function(n){if(n=n||window.event,!n.defaultPrevented){var t=n.target||n.srcElement,o=t;o.parentNode&&"A"===o.parentNode.tagName&&(o=o.parentNode),"A"===o.tagName&&o.href&&0===o.href.indexOf(location.origin)&&(u(o.href),d.hash&&d.pathname===location.pathname||(n.preventDefault(),e.go(o.href,!0),d.hash&&d.click()))}},!1),window.addEventListener("popstate",function(n){n.state?e.go(n.state.href,!1):e.go(location.href,!1)})},this.go=function(n,t){var o=u(n);s.onViewiUrlChange&&s.onViewiUrlChange(o);var r=c.resolve(o);if(null==r)throw"Can't resolve route for uri: "+o;t&&window.history.pushState({href:n},"",n),e.render(r.item.action,r.params)};var m=[],v=function(n,t){var o=arguments.length>2&&arguments[2],s=arguments.length>3&&arguments[3];if(n.expression){var a={call:!0,instance:t},c=["_component","app"];return(o||n.setter)&&c.push("event"),c=n.scope?c.concat(n.scope.stack):c.concat(m),n.code=n.code.replace(r,""),n.code=n.code.replace(i,""),n.setter?c.push(n.isChecked?"if(Array.isArray("+n.code+")) {  if ("+n.code+".indexOf(event.target.value) === -1) { event.target.checked && "+n.code+".push(event.target.value);event.target.checked && notify("+n.code+");  } else { !event.target.checked && "+n.code+".splice("+n.code+".indexOf(event.target.value), 1);!event.target.checked && notify("+n.code+");  }  } else { "+n.code+" = event.target.checked; } ":n.code+" = event.target.multiple ? Array.prototype.slice.call(event.target.options).where(function(x){ return x.selected; }).select(function(x){ return x.value; }) : event.target.value;"):n.raw||s?c.push("return "+n.code+";"):c.push("return app.htmlentities("+n.code+");"),a.code=n.code,a.func=Function.apply(null,c),a}return{call:!1,content:n.raw?n.content:e.decode(n.content)}},N=["template"],b=["if","else-if","else","foreach"],g=["if","else-if","else"],y=[],w=function(e,n){var t=arguments.length>2&&arguments[2],o=arguments.length>3?arguments[3]:null,r=o&&!o.isRoot?o:null,i=arguments.length>4&&arguments[4],s=e.children,a=[],c=!1,d=null,l={};for(var p in s){var u=s[p];if("tag"!==u.type||"slot"!==u.content)if(!u.raw&&c&&("text"===u.type&&"text"===c.type||"comment"===u.type&&"comment"===c.type))c.contents.push(v(u,n)),u.subs&&(c.subs=(c.subs||[]).concat(u.subs));else{var f=null;u.attributes&&(f=u.attributes.first(function(e){return-1!==b.indexOf(e.content)&&-1===y.indexOf(e.content)}));var h=!1;if(c={id:++V,type:u.type,contents:[v(u,n)],domNode:null,parent:r,instance:n,previousNode:d,subs:u.subs},u.raw&&(c.type="raw",c.isVirtual=!0),r&&r.condition&&(c.condition=r.condition),d&&(d.nextNode=c),d=c,"tag"===u.type&&u.expression&&(c.type="dynamic",c.componentChildren=u.children,c.isVirtual=!0),null===f&&"tag"===u.type&&-1!==N.indexOf(u.content)){var k=u.content;c.type=k,c.isVirtual=!0}if(r&&r.scope&&(c.scope=r.scope),null===f)if(y.length>0&&(y=[]),"component"===u.type&&(h=u.content),childNodes=!1,u.children&&(childNodes=w(u,n,t,c)),u.attributes&&(c.attributes=u.attributes.where(function(e){return-1===b.indexOf(e.content)}).select(function(e){var t={},o=!e.expression&&"("===e.content[0];return t.content=e.content,t.isAttribute=!0,t.parent=c,t.contentExpression=v(e,n),t.instance=c.instance,e.dynamic&&(t.dynamic=e.dynamic),c.scope&&(t.scope=c.scope),e.children&&(t.children=e.children.select(function(t){var r={},i="model"===e.content;return r.contentExpression=v(t,n,o,i),"dynamic"!==c.type&&"component"!==c.type||(r.propExpression=v(t,n,null,!0),t.subs&&(r.subs=t.subs)),r.content=t.content,t.subs&&!o&&(r.subs=(r.subs||[]).concat(t.subs)),r})),e.subs&&!o&&(t.subs=(t.subs||[]).concat(e.subs)),t.origin=e,t})),h){var E=!1;i&&(de=!0,E=!0);var C=oe(h,childNodes,c.attributes);o.childInstances||(o.childInstances=[]),o.childInstances.push(C),E&&(de=!1);var I="main";if(C.wrapper.hasVersions&&(_(C.wrapper),x(C.wrapper),I=C.wrapper&&C.wrapper.component.__version&&C.wrapper.component.__version(),!I))throw new Error("Component '"+C.wrapper.name+"' doesn't support versioning!");if(!(I in C.versions))throw new Error("Can't find version '"+I+"' for component '"+C.wrapper.name+"'!");S=a.length>0?a[a.length-1]:null,H=[];C.versions[I].each(function(e){!S||"text"!==S.type||"text"!==e.type||e.raw||S.raw?(e.nextNode=null,e.parent=r,e.previousNode=S,S&&(S.nextNode=e),S=e,H.push(e)):S.contents=S.contents.concat(e.contents)}),a=a.concat(H),d=a.length>0?a[a.length-1]:null}else childNodes&&("dynamic"===c.type||"raw"===c.type?c.itemChildren=childNodes:c.children=childNodes),a.push(c);else{if(c.type=f.content,"if"===c.type&&(l={}),c.isVirtual=!0,y.push(f.content),-1!==g.indexOf(c.type)&&(c.condition=f.children?v(f.children[0],n):{},f.children&&f.children[0].subs))for(var O in c.subs=f.children[0].subs,f.children[0].subs)l[f.children[0].subs[O]]=!0;var j=!1;if("foreach"===c.type&&f.children){j=f.children[0],j.subs&&(c.subs=(c.subs||[]).concat(j.subs)),c.forExpression={};var arguments=["_component","app"].concat(m);arguments.push("return "+j.forData+";"),c.forExpression.data=Function.apply(null,arguments),c.forExpression.key=j.forKey,c.forExpression.value=j.forItem,m.push(j.forKey),m.push(j.forItem),c.scope={stack:[],data:{}}}if(c.children=w({children:[u]},n,t,c),c.childInstances&&(c.children[0].childInstances=c.childInstances,delete c.childInstances),j){var A=m.indexOf(j.forKey);A>-1&&m.splice(A,1),A=m.indexOf(j.forItem),A>-1&&m.splice(A,1)}a.push(c)}}else{!0;var P=u.attributes&&u.attributes.first(function(e){return"name"===e.content}),B=0,T=function(e){return!e.attributes};P&&(B=P.children[0].content,T=function(e){return e.attributes&&e.attributes.first(function(e){return"name"===e.content&&e.children[0].content===B})});var R=!0;if(t){if(0===B){var L=t.where(function(e){return"tag"!==e.type||"slotContent"!==e.contents[0].content});if(L.length>0){R=!1;var S=a.length>0?a[a.length-1]:null,H=[];L.each(function(e){!S||"text"!==S.type||"text"!==e.type||e.raw||S.raw?(e.nextNode=null,e.parent=r,e.previousNode=S,S&&(S.nextNode=e),S=e,H.push(e)):S.contents=S.contents.concat(e.contents)}),a=a.concat(H)}}else{var D=t.first(function(e){return"tag"===e.type&&"slotContent"===e.contents[0].content&&T(e)});if(D){R=!1;var S=a.length>0?a[a.length-1]:null,H=[];D.children.each(function(e){!S||"text"!==S.type||"text"!==e.type||e.raw||S.raw?(e.nextNode=null,e.parent=r,e.previousNode=S,S&&(S.nextNode=e),S=e,H.push(e)):S.contents=S.contents.concat(e.contents)}),a=a.concat(H)}}d=a.length>0?a[a.length-1]:null}if(R){var M=w(u,n,!1,r);S=a.length>0?a[a.length-1]:null,H=[];M.each(function(e){!S||"text"!==S.type||"text"!==e.type||e.raw||S.raw?(e.nextNode=null,e.parent=r,e.previousNode=S,S&&(S.nextNode=e),S=e,H.push(e)):S.contents=S.contents.concat(e.contents)}),a=a.concat(H),d=a.length>0?a[a.length-1]:null}}}return a},x=function(n){if(!n.isMounted){if(n.component.__beforeMount&&n.component.__beforeMount(),n.attributes)for(var t in n.attributes){var o=n.attributes[t],r="("===o.content[0];if(r){var i=o.content,s=i.substring(1,i.length-1),a=null;o.dynamic?(o.eventExpression||(o.instance.component||(o.instance.component=_(o.instance)),o.eventExpression=v(o.dynamic,o.instance,!0)),a=o.eventExpression.func):a=o.children[0].contentExpression.func,o.listeners||(o.listeners={}),o.listeners[i]&&elm.removeEventListener(s,o.listeners[i]),o.listeners[i]=function(n){var t=[o.instance.component,e,n];if(o.scope)for(var r in o.scope.stack)t.push(o.scope.data[o.scope.stack[r]]);a.apply(null,t)},n.component.$_callbacks||(n.component.$_callbacks={}),n.component.$_callbacks[s]=o.listeners[i]}var c=null,d=null;for(var l in o.children){var p=o.children[l].propExpression;if(p.call){o.instance.component||(o.instance.component=_(o.instance));var u=[o.instance.component,e];if(o.scope)for(var f in o.scope.stack)u.push(o.scope.data[o.scope.stack[f]]);d=r?p.func:p.func.apply(null,u),o.children[l].subs&&(K["this."+o.content]={instance:o.instance,subs:o.children[l].subs})}else d=p.content;l>0?c+=d:c=d}"true"===c?c=!0:"false"===c?c=!1:"string"!=typeof c||isNaN(c)||(c=+c),o.content in n.component&&(n.component[o.content]=c),n.component._props[o.content]=c}n.component.__mounted&&n.component.__mounted(),n.isMounted=!0}},_=function(e){if(!e.component){var n=ee(e.name,e.params,e.__id);if(e.component=n,e.isCreated=!0,e.attributes)for(a=0;a<e.attributes.length;a++){var t=e.attributes[a],o=!t.expression&&"("===t.content[0];if(t.origin.childComponent=n,!o){if(t.subs)for(var r in t.subs)q(t,t.subs[r]);if(t.children)for(var i=0;i<t.children.length;i++){var s=t.children[i];if(s.subs)for(var r in s.subs)q(t,s.subs[r])}}}return ue[e.name]=e,n}if(e.attributes)for(var a=0;a<e.attributes.length;a++)e.attributes[a].origin.childComponent=e.component},k=function(n,o,r){if(n)try{var i=o.content;if(o.contentExpression.call){o.instance.component||(o.instance.component=_(o.instance));var s=[o.instance.component,e];if(o.scope)for(var a in o.scope.stack)s.push(o.scope.data[o.scope.stack[a]]);if(i=o.contentExpression.func.apply(null,s),o.latestValue&&o.latestValue!==i&&(n.removeAttribute(o.latestValue),o.listeners&&o.latestValue in o.listeners)){var c=o.latestValue.substring(1,o.latestValue.length-1);n.removeEventListener(c,o.listeners[o.latestValue])}o.latestValue=i}if("("===i[0]){if(l&&!r)return;c=i.substring(1,i.length-1);var d=null;o.dynamic?(o.eventExpression||(o.instance.component||(o.instance.component=_(o.instance)),o.eventExpression=v(o.dynamic,o.instance,!0)),d=o.eventExpression.func):d=o.children[0].contentExpression.func,o.listeners||(o.listeners={}),o.listeners[i]&&n.removeEventListener(c,o.listeners[i]),o.listeners[i]=function(n){var t=[o.instance.component,e,n];if(o.scope)for(var r in o.scope.stack)t.push(o.scope.data[o.scope.stack[r]]);d.apply(null,t)},n.addEventListener(c,o.listeners[i])}else{if(r&&"model"!==i)return;if(o.subs&&!o.subscribed){for(var p in o.subs)q(o,o.subs[p]);o.subscribed=!0}var u=!1,f=!0;i in t&&(u=!0);var h=[];for(var m in o.children){if(o.children[m].subs&&!o.children[m].subscribed){for(var p in o.children[m].subs)q(o,o.children[m].subs[p]);o.children[m].subscribed=!0}var N=o.children[m].contentExpression;if(N.call){o.instance.component||(o.instance.component=_(o.instance));s=[o.instance.component,e];if(o.scope)for(var a in o.scope.stack)s.push(o.scope.data[o.scope.stack[a]]);f=N.func.apply(null,s),h.push(f)}else h.push(N.content)}if(u)return void(f?n.setAttribute(i,i):n.removeAttribute(i));var b="model"===i,g=h.join("");if(b){if(l&&!r)return;var y="checkbox"===n.getAttribute("type"),w="radio"===n.getAttribute("type"),x="SELECT"===n.tagName,k=x&&n.multiple,E=y||w;if(E||k||(n.value=g),w){var V=n.getAttribute("checked");n.value!=g&&V?(n.removeAttribute("checked"),n.checked=!1):n.value!=g||V||(n.setAttribute("checked","checked"),n.checked=!0)}c=E||x?"change":"input";if(o.listeners||(o.listeners={}),!o.valueExpression&&o.children.length>0){o.instance.component||(o.instance.component=_(o.instance));s=[o.instance.component,e];var C=[];if(o.scope)for(var a in o.scope.stack)C.push(o.scope.data[o.scope.stack[a]]);o.valueExpression=v({code:o.children[0].contentExpression.code,expression:!0,setter:!0,isChecked:y,isMultiple:k,scope:o.scope},o.instance);d=o.valueExpression.func;o.listeners[c]=function(e){d.apply(null,s.concat([e]).concat(C))}}n.removeEventListener(c,o.listeners[c]),n.addEventListener(c,o.listeners[c])}else null===h[0]?n.removeAttribute(i):n.getAttribute(i)!==g&&n.setAttribute(i,g)}}catch(e){console.error(e),console.log(o.content)}},E=function(e){for(var n=e,t=!0,o=!1,r=!1;!n.domNode||t;)if(t=!1,null!==n.previousNode){if(n=n.previousNode,o=!1,n.isVirtual){if(n===r)throw new Error("Can't find the node before current!");r=n;for(var i=n;null!==i&&!i.domNode;)i=i.isVirtual&&i.children?i.children[i.children.length-1]:null;i&&(n=i)}}else{if(null===n.parent)return null;n=n.parent,o=!0}return{itsParent:o,node:n}},V=0,C=function(t,r,i,s){if(!s&&(r.isVirtual||"text"===r.type)){for(var c=r;c.parent&&c.parent.isVirtual;)c=c.parent;for(var d=E(r),p=(d&&d.itsParent?d.node.domNode:d&&d.node.domNode.parentNode)||t,u=c;u.previousNode&&(u.previousNode.isVirtual||"text"===u.previousNode.type);)u=u.previousNode;for(var f=c;f.nextNode&&(f.nextNode.isVirtual||"text"===f.nextNode.type);)f=f.nextNode;if(u!==c||f!==c){for(var h=u,m=!0;m;)C(p,h,!0,!0),m=h!==f,h=h.nextNode;return}}if(r.renderIteration!==ve){if(r.renderIteration=ve,i){var v=r.parent&&r.parent.condition,N=v&&v.value;if(v&&!N)return void R([r])}if(r.isVirtual||!r.condition||r.condition.value){r.instance.component||(r.instance.component=_(r.instance)),r.instance.isMounted||x(r.instance);var b=[];for(var g in r.contents){var y=r.contents[g];if(y.call){var w=[y.instance.component,e];if(r.scope)for(var V in r.scope.stack)w.push(r.scope.data[r.scope.stack[V]]);b.push(y.func.apply(null,w))}else b.push(y.content)}var I=b.join(""),L=!1,S=!1;if(r.skipIteration){r.skipIteration=!1;for(var M=r;M.isVirtual;)M=M.parent;L=M.domNode;var W=O.first(function(e,n){return e===L},!0);if(W&&W[0].parentNode&&(j[W[1]]=!0),r.refreshAttributes&&r.attributes)for(var U in r.refreshAttributes=!1,r.attributes)k(L,r.attributes[U])}else switch(r.type){case"text":if(t.doctype){L=t.doctype;break}var $=!1,z=E(r);if(i&&null==z)return;if(!$)if(z&&"text"==z.node.type)z.node.domNode.nodeValue+=I,null!==r.domNode&&(r.domNode.parentNode.removeChild(r.domNode),r.domNode=null);else if(null!==r.domNode&&r.domNode.parentNode===t)r.domNode.nodeValue!==I&&(r.domNode.nodeValue=I),L=r.domNode;else{L=document.createTextNode(I);var K=z.node.domNode.nextSibling;z.itsParent||null===K?z.itsParent?z.node.domNode.childNodes.length>0?z.node.domNode.insertBefore(L,z.node.domNode.childNodes[0]):z.node.domNode.appendChild(L):(z.node.domNode.parentNode||t).appendChild(L):K.parentNode.insertBefore(L,K),r.domNode=L}break;case"tag":if(t.documentElement){L=t.documentElement,r.domNode=L,j[0]=!0,j[1]=!0;break}if(!l&&I in o){var F=L=document.createElement(I);if(r.domNode=L,B(F,r,r.children,S,s),r.attributes)for(var U in r.attributes)k(F,r.attributes[U]);var J=O.first(function(e,n){return!(n in j)&&e.isEqualNode(F)},!0);if(J){j[J[1]]=!0,r.domNode=J[0];z=E(r),K=z.node.domNode.nextSibling;z.itsParent||null===K?z.itsParent?z.node.domNode.appendChild(J[0]):z.node.domNode.parentNode.appendChild(J[0]):K.parentNode.insertBefore(J[0],K);break}if(!J&&(J=a.first(function(e){return e.isEqualNode(F)}),J)){r.domNode=J;z=E(r),K=z.node.domNode.nextSibling;z.itsParent||null===K?z.itsParent?z.node.domNode.appendChild(J):z.node.domNode.parentNode.appendChild(J):K.parentNode.insertBefore(J,K);break}}if(!l&&"head"===I){var Y=O.first(function(e){return e.nodeName.toLowerCase()===I},!0);L=Y[0],j[Y[1]]=!0,r.domNode=L;break}var G=A?O.first(function(e,n){return e.nodeName.toLowerCase()===I&&!(n in j)},!0):null;if(G&&G[0].parentNode){if(j[G[1]]=!0,P==G[1]){L=G[0],r.domNode=L;break}G[1]in j||G[0].parentNode.removeChild(G[0])}if(L=document.createElement(I),null!==r.domNode&&r.domNode.parentNode)r.domNode.parentNode.replaceChild(L,r.domNode),r.children&&R(r.children);else{z=E(r);if(null==z)return;K=z.node.domNode.nextSibling;z.itsParent||null===K?z.itsParent?z.node.domNode.childNodes.length>0?z.node.domNode.insertBefore(L,z.node.domNode.childNodes[0]):z.node.domNode.appendChild(L):(z.node.domNode.parentNode||t).appendChild(L):K.parentNode.insertBefore(L,K)}if(r.domNode=L,I in o&&a.push(L),r.attributes)for(var U in r.attributes)k(L,r.attributes[U]);break;case"comment":if(L=document.createComment(I),null!==r.domNode)r.domNode.parentNode.replaceChild(L,r.domNode);else{z=E(r);if(null==z)return;K=z.node.domNode.nextSibling;z.itsParent||null===K?z.itsParent?z.node.domNode.childNodes.length>0?z.node.domNode.insertBefore(L,z.node.domNode.childNodes[0]):z.node.domNode.appendChild(L):z.node.domNode.parentNode.appendChild(L):K.parentNode.insertBefore(L,K)}r.domNode=L;break;case"if":usedSubscriptions={},r.instance.component||(r.instance.component=_(r.instance));w=[r.instance.component,e];if(r.scope)for(var V in r.scope.stack)w.push(r.scope.data[r.scope.stack[V]]);var Q=!!r.condition.func.apply(null,w);if(void 0!==r.condition.value&&Q===r.condition.value)return;r.condition.value=Q,L=t,r.parentDomNode=t,r.condition.previousValue=r.condition.value,r.topRealPreviousNode=r.parent&&r.parent.topRealPreviousNode||r.previousNode,S=!0;break;case"else-if":r.instance.component||(r.instance.component=_(r.instance));w=[r.instance.component,e];if(r.scope)for(var V in r.scope.stack)w.push(r.scope.data[r.scope.stack[V]]);Q=!r.previousNode.condition.value&&!!r.condition.func.apply(null,w);if(r.condition.previousValue=r.previousNode.condition.value||Q,void 0!==r.condition.value&&Q===r.condition.value)return;r.condition.value=Q,L=t,r.parentDomNode=t,r.topRealPreviousNode=r.parent&&r.parent.topRealPreviousNode||r.previousNode,S=!0;break;case"else":Q=!r.previousNode.condition.previousValue;if(void 0!==r.condition.value&&Q===r.condition.value)return;r.condition.value=Q,L=t,r.parentDomNode=t,r.topRealPreviousNode=r.parent&&r.parent.topRealPreviousNode||r.previousNode,S=!0;break;case"template":L=t,S=!0;break;case"foreach":if(L=t,S=!0,L){r.itemChildren||(r.itemChildren=r.children),r.instance.component||(r.instance.component=_(r.instance));w=[r.instance.component,e];if(r.scope)for(var V in r.scope.stack)w.push(r.scope.data[r.scope.stack[V]]);var X=r.forExpression.data.apply(null,w),Z=null,ee=Array.isArray(X),ne={},te={},re=[];for(var V in X){var ie=ee?+V:V,se=!1;if(r.children)for(g=0;g<r.children.length;g++)if(!(V in ne||g in te)&&r.children[g].foreachData===X[V]){ne[V]=!0,r.children[g].previousNode=Z,Z&&(Z.nextNode=r.children[g]),Z=r.children[g],r.children[g].scope.data[r.forExpression.key]=ie,re.push(r.children[g]),te[g]=!0,se=!0;break}if(!se){var ae={type:"template",isVirtual:!0,parent:r,previousNode:Z,instance:Object.assign({},r.instance),domNode:null,scope:r.scope,foreachData:X[V],foreachKey:ie};ae.scope={parentScope:r.scope,data:Object.assign({},r.scope.data),stack:r.scope.stack.slice()},Z&&(Z.nextNode=ae),Z=ae,ae.scope.stack.push(r.forExpression.key),ae.scope.stack.push(r.forExpression.value),ae.scope.data[r.forExpression.key]=ie,ae.scope.data[r.forExpression.value]=X[V],H(ae,r.itemChildren),re.push(ae)}}if(null!=r.children)if(re.length>0)for(g=r.children.length-1;g>=0;g--)g in te||R([r.children[g]]);else R(r.children);re.length>0?r.children=re:r.children=null}break;case"dynamic":if(L=t,S=!0,r.latestVal!==I){R(r.children),r.children=null;ae={contents:r.contents,attributes:r.attributes,parent:r,previousNode:null,scope:r.scope,instance:r.instance,domNode:null};if(r.itemChildren&&D(ae,r.itemChildren),I in n)ae.type="tag",ae.root=r.root;else{var ce=oe(I,ae.children,r.attributes);_(ce.wrapper),x(ce.wrapper),pe(ce.root),ae.type="template",ae.isVirtual=!0,ae.children=ce.versions.main,ae.children.each(function(e){e.parent=ae})}r.children=[ae]}r.latestVal=I;break;case"raw":if(L=t,S=!0,r.latestHtml===I){if(r.rawNodes)for(g=0;g<r.rawNodes.length;g++)r.rawNodes[g].domNode.usedByRenderer=!0;return}r.latestHtml=I,r.rawNodes&&R(r.rawNodes),r.children=null,r.rawNodes=null;var de=T(r);if(de){var le=document.createElement(de.domNode.nodeName);if(le.innerHTML=I,le.childNodes.length>0){var ue=0,fe=E(r);fe.itsParent||"text"!==fe.node.type||3!==le.childNodes[0].nodeType||(fe.node.domNode.nodeValue+=le.childNodes[0].nodeValue,ue=1);for(var he=[];ue<le.childNodes.length;ue++)he.push({domNode:le.childNodes[ue]});K=fe.node.domNode.nextSibling;if(he.length>0){for(g=0;g<he.length;g++)!fe.itsParent&&K?K.parentNode.insertBefore(he[g].domNode,K):fe.itsParent?fe.node.domNode.appendChild(he[g].domNode):fe.node.domNode.parentNode.appendChild(he[g].domNode);var me=he[he.length-1];r.children=[{type:3===me.domNode.nodeType?"text":"tag",parent:r,previousNode:null,scope:r.scope,instance:r.instance,domNode:me.domNode}],r.rawNodes=he}}}if(r.rawNodes)for(g=0;g<r.rawNodes.length;g++)r.rawNodes[g].domNode.usedByRenderer=!0;if(r.subs&&!r.subscribed){for(var Ne in r.subs)q(r,r.subs[Ne]);r.subscribed=!0}return;default:throw new Error("Node type '"+r.type+"' is not implemented.")}if(!r.isVirtual&&L&&r.root&&(r.instance.component._element=L),L&&(L.usedByRenderer=!0),r.subs&&!r.subscribed){for(var Ne in r.subs)q(r,r.subs[Ne]);r.subscribed=!0}L&&B(L,r,r.children,S,s)}}},I=null,O=[],j={},A=!1,P=0,B=function(e,n,t,o,r){var i=I,s=O,a=j;if(I=e,e.childNodes&&!n.isVirtual)for(var c=0;c<e.childNodes.length;c++)"usedByRenderer"in e.childNodes[c]&&(e.childNodes[c].usedByRenderer=!1);for(var c in A&&e!==i&&(O=Array.prototype.slice.call(I.childNodes),j={}),t){var d=O.first(function(e,n){return e===t[c].domNode},!0);d&&d[0].parentNode&&(j[d[1]]=!0)}for(var c in t)P=c,t[c].childInstances&&pe(t[c]),C(e,t[c],o,r);if(e.childNodes&&!n.isVirtual)for(c=e.childNodes.length-1;c>=0;c--)e.childNodes[c].usedByRenderer||"usedByRenderer"in e.childNodes[c]&&e.removeChild(e.childNodes[c]);I=i,O=s,j=a},T=function(e){return e.parent?e.parent.domNode?e.parent:T(e.parent):null},R=function(e,n){for(var t in e)if(e[t].children&&R(e[t].children,n),e[t].domNode&&(e[t].domNode.parentNode&&e[t].domNode.parentNode.removeChild(e[t].domNode),e[t].domNode=null),g.includes(e[t].type)&&delete e[t].condition.value,e[t].skipIteration&&(e[t].skipIteration=!1),e[t].origin)for(var o in e[t].origin)e[t].origin[o]&&(e[t].origin[o].skipIteration=!1,e[t].origin[o].domNode=null,e[t].origin[o]=null)},L={},S=!1,H=function(e,n){L={},S=!0,D(e,n),S=!1},D=function(e,n){var t=null,o=n.select(function(n){var o=M(e,n);return o.parent=e,o.previousNode=t,t=o,o.previousNode&&(o.previousNode.nextNode=o),o});e.itemChildren?e.itemChildren=o:e.children=o},M=function(e,n){var t=Object.assign({},n);return n.cloned=!0,delete t.cloned,delete t.subscribed,t.nextNode=null,t.previousNode=null,t.domNode=null,t.scope=e.scope||t.scope,n.condition&&(g.includes(n.type)?t.condition=Object.assign({},n.condition):t.condition=e.condition),S&&(t.instance.component||(t.instance.__id in L?t.instance=L[t.instance.__id]:(t.instance=Object.assign({},n.instance),L[t.instance.__id]=t.instance,t.instance.__id=++W,L[t.instance.__id]=t.instance),t.instance.attributes=t.instance.attributes.select(function(e){var n=Object.assign({},e);return n.scope=t.scope||n.scope,n.origin=Object.assign({},e.origin),delete n.origin.childComponent,n})),n.childInstances&&(t.childInstances=n.childInstances.select(function(e){if(!e.wrapper.component){var n=Object.assign({},e);return e.wrapper.__id in L?n.wrapper=L[e.wrapper.__id]:(n.wrapper=Object.assign({},e.wrapper),L[n.wrapper.__id]=n.wrapper,n.wrapper.__id=++W,L[n.wrapper.__id]=n.wrapper,n.wrapper.attributes=e.wrapper.attributes.select(function(e){var n=Object.assign({},e);return n.scope=t.scope||n.scope,n})),n}return e})),t.contents=t.contents.select(function(e){var n=Object.assign({},e);return n.call&&n.instance.__id in L&&(n.instance=L[n.instance.__id]),n})),t.attributes&&(t.attributes=t.attributes.select(function(e){var o=Object.assign({},e);return o.parent=t,e.cloned=!0,delete o.cloned,delete o.subscribed,S&&!o.instance.component&&(o.instance.__id in L?o.instance=L[o.instance.__id]:(o.instance=Object.assign({},n.instance),L[o.instance.__id]=o.instance,o.instance.__id=++W,L[o.instance.__id]=o.instance,o.instance.attributes=o.instance.attributes.select(function(e){var n=Object.assign({},e);return n.scope=o.scope||n.scope,n}))),o.scope=t.scope||o.scope,e.children&&(e.children=e.children.select(function(e){var n=Object.assign({},e);return n.parent=t,e.cloned=!0,delete n.cloned,delete n.subscribed,n})),o})),(n.children||n.itemChildren)&&D(t,n.children||n.itemChildren),t},W=0,U=function(e,n){return"__id"in e||Object.defineProperty(e,"__id",{enumerable:!1,writable:!1,value:n||++W}),e.__id},$={},z={},K={},q=function(e,n){var t=e.isAttribute,o=t?e.parent.instance:e.instance,r=U(o);r in z||(z[r]={});for(var i=n.split("."),s=i[0],a=[],c=1;c<i.length;c++)s=s+"."+i[c],a.push(s);for(c=0;c<a.length;c++){var d=a[c];if(d in z[r]||(z[r][d]=[]),z[r][d].push(e),d in K){var l=K[d],p=l.instance,u=l.subs,f=U(p);for(var h in f in z||(z[f]={}),u){var m=u[h];m in z[f]||(z[f][m]=[]),z[f][m].push(e)}}}},F=function(){var n=$;for(var t in $={},ve++,n)for(var o in n[t])try{var r=n[t][o];if(r.isAttribute){var i="dynamic"===r.parent.type?r.parent.children&&r.parent.children.length>0&&r.parent.children[0].domNode:r.parent.domNode;if(i&&k(i,r),"component"===r.parent.type&&r.origin.childComponent){var s=[r.instance.component,e];if(r.scope)for(var a in r.scope.stack)s.push(r.scope.data[r.scope.stack[a]]);currentValue=null;for(var c=0;c<r.children.length;c++){var d=r.children[c].propExpression.call?r.children[c].propExpression.func.apply(null,s):r.children[c].propExpression.content;currentValue=0===c?d:currentValue+d}r.origin.childComponent[r.content]=currentValue}}else if(r.isVirtual)C(r.parentDomNode,r);else{var l=r.domNode&&r.domNode.parentNode;if(!l){var p=E(r);l=p&&p.node.domNode&&p.node.domNode.parentNode}l&&C(l,r)}}catch(e){console.error(e)}Object.keys($).length>0&&F()},J=function(e){for(var n in e.subs){var t=e.subs[n],o=t.id;o in z&&t.path in z[o]&&($[o+"_"+t.path]=z[o][t.path],setTimeout(function(){F()},0))}};this.notify=function(e,n){if(Array.isArray(e)){var t=Object.getPrototypeOf(e);t.deps&&J(t.deps)}};var Y=function(e,n){var t=Object.getPrototypeOf(e);if(!("deps"in t)){var o={};return Object.defineProperty(o,"deps",{enumerable:!1,writable:!1,value:n}),Object.setPrototypeOf(o,t),Object.setPrototypeOf(e,o),e}for(var r in n)for(var i in r in e.deps||(e.deps[r]={}),n[r])e.deps[r][i]=n[r][i]},G=function(e){var n=arguments.length>1?arguments[1]:e,t=arguments.length>2?arguments[2]:"this",o=arguments.length>3?arguments[3]:{subs:{}};if(Array.isArray(e)){Y(e,o);for(var r=0;r<e.length;r++)null!==e[r]&&"object"==typeof e[r]&&G(e[r],n,t+"[key]")}else{var i=Object.keys(e);for(r=0;r<i.length;r++)X(n,t+"."+i[r],e,i[r]),X(n,t+"[key]",e,i[r])}return e},Q=null,X=function(e,n,t,o){Q=null;var r=null,i=t[o],s=!1;if(Q?r=Q:(r={subs:{}},s=!0),null!==i&&"object"==typeof i&&G(i,e,n,r),"function"!=typeof i){var a=U(e);r.subs[a+n]={instance:e,id:a,path:n},s&&Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:function(){return Q=r,i},set:function(t){t!==i&&(J(r),i=t,null!==i&&"object"==typeof i&&G(i,e,n,r))}})}},Z={},ee=function(n,t,o){var r=e.components[n];if(!r)return null;var i=r.dependencies,s=r.service;if(s&&n in Z)return Z[n];if(!i){var a=new window[n];return r.init&&a.__init(),U(a,o),G(a),s&&(Z[n]=a),a}var arguments=[null];for(var c in i){var d=i[c],l=null;l=t&&d.argName in t?t[d.argName]:d.default?d.default:d.null?null:d.builtIn?"string"===d.name?"":0:ee(d.name),arguments.push(l)}a=r.init?new window[n]:new(window[n].bind.apply(window[n],arguments));return r.init&&(arguments.shift(),a.__init.apply(a,arguments)),U(a,o),G(a),s&&(Z[n]=a),a},ne=function(e,n){var t=e.length,o=n.length;if(t==o){for(l=0;l<t;l++)if(l<o){var r=!0,i=!1,s=e[l].contents&&e[l].contents.select(function(e){return e.content||e.code}).join(),a=n[l].contents&&n[l].contents.select(function(e){return e.content||e.code}).join();e[l].instance.name!=n[l].instance.name&&(r=!1),s!=a&&(r=!1);var c=e[l].attributes&&e[l].attributes.select(function(e){return(e.content||"")+(e.children&&";"+e.children.select(function(e){return e.contentExpression.content||e.contentExpression.code||""}).join(";")||"")}).join(";"),d=n[l].attributes&&n[l].attributes.select(function(e){return(e.content||"")+(e.children&&";"+e.children.select(function(e){return e.contentExpression.content||e.contentExpression.code||""}).join(";")||"")}).join(";");c!=d&&(r=!1),r||"dynamic"===e[l].type&&"dynamic"===n[l].type?(i=e[l].contents&&e[l].contents.first(function(e){return e.code}),e[l].domNode=n[l].domNode,e[l].skipIteration=!e[l].isVirtual&&!!n[l].domNode&&!i,e[l].skipIteration&&(n[l].origin||(n[l].origin={}),n[l].origin[e[l].id]=e[l],e[l].refreshAttributes=e[l].attributes&&e[l].attributes.first(function(e){return e.children&&e.children.first(function(e){return e.contentExpression.code})}),e[l].refreshAttributes&&e[l].attributes.each(function(e,t){e.latestValue=n[l].attributes[t].latestValue,e.listeners=n[l].attributes[t].listeners})),n[l].rawNodes&&(e[l].rawNodes=n[l].rawNodes,e[l].latestHtml=n[l].latestHtml),e[l].children&&n[l].children&&ne(e[l].children,n[l].children)):(n[l].domNode&&n[l].domNode.parentNode?n[l].domNode.parentNode.removeChild(n[l].domNode):n[l].isVirtual&&(e[l].previousNode&&"text"===e[l].previousNode.type&&e[l].previousNode.skipIteration&&(e[l].previousNode.skipIteration=!1,R([e[l].previousNode])),R(n[l].children)),e[l].children&&R(e[l].children),n[l].rawNodes&&(e[l].rawNodes=n[l].rawNodes,e[l].latestHtml=n[l].latestHtml))}}else{R(n);for(var l=0;l<t;l++)e[l].skipIteration&&(e[l].skipIteration=!1,e[l].domNode=null,e[l].children&&R(e[l].children,!0))}},te=null,oe=function(n,t,o,r,i){if(!(n in e.components))throw new Error("Component "+n+" doesn't exist.");var s=null,a=null;if(de){var c=ie.components.first(function(e){return e.name===n},!0);c&&(ie.components.splice(c[1],1),s=c[0].build,a=c[0].instanceWrapper,a.isMounted=!1,a.attributes=o,a.params=r)}var d=te;te=n;var l=e.components[n];a=a||{component:null,name:n,isMounted:!1,isCreated:!1,params:r,hasVersions:l.hasVersions,attributes:o,__id:++W};var p={isRoot:!0},u={root:p,versions:{},wrapper:a};if(l.hasVersions)for(var f in l.versions)u.versions[f]=w(l.versions[f],a,t,p,i),s&&ne(u.versions[f],s.versions[f]);else u.versions.main=w(l.nodes,a,t,p,i),s&&ne(u.versions.main,s.versions.main);for(var f in u.versions)for(var h=0;h<u.versions[f].length;h++)u.versions[f][h].root=!0;return te=d,re.components.push({name:n,build:u,instanceWrapper:a}),u},re={name:null,nodes:null,components:[]},ie={name:null,nodes:null,components:[]},se=function(e,n){if(e.children)for(var t in e.children)e.children[t].domNode?n.push(e.children[t]):e.children[t].isVirtual&&se(e.children[t],n)},ae=/^\s+|\s+$/,ce=function(e,n){var t=e.domNode.nodeType===n.nodeType;if(t){if(3===e.domNode.nodeType||8==e.domNode.nodeType)t=e.domNode.nodeValue.replace(ae,"")==n.nodeValue.replace(ae,""),t&&(e.domNode=n);else if(1===e.domNode.nodeType&&(t=e.domNode.nodeName==n.nodeName,t)){e.domNode=n,!e.isVirtual&&n&&e.root&&e.instance&&e.instance.component&&(e.instance.component._element=n);var o=0,r=0,i=n.childNodes.length,s=e.children?e.children.length:0;e.children&&e.children.length>0&&(e.children[s-1].domNode&&3===e.children[s-1].domNode.nodeType&&(0==n.childNodes.length||3!==n.childNodes[i-1].nodeType)&&/^\s*$/.test(e.children[s-1].domNode.nodeValue)&&n.appendChild(e.children[s-1].domNode),e.children[0].domNode&&3===e.children[0].domNode.nodeType&&3!==n.childNodes[0].nodeType&&/^\s*$/.test(e.children[0].domNode.nodeValue)&&n.insertBefore(e.children[0].domNode,n.childNodes[0]),s=e.children.length,i=n.childNodes.length);for(var a=[],c=[],d=0;d<s;d++)e.children[d].rawNodes?c=c.concat(e.children[d].rawNodes):e.children[d].isVirtual?se(e.children[d],c):c.push(e.children[d]);var l=c.length;for(d=0;d+r<i;d++){for(;d+o<l&&!c[d+o].domNode;)o++
;if(d+o<l)if(c[d+o].type){var p=ce(c[d+o],n.childNodes[d+r]);if(!p){for(var u=!1,f=d+r+1;f<i;f++)if(u=ce(c[d+o],n.childNodes[f]),u){for(var h=d+r;h<f;h++)a.push(h);r+=f-(d+r);break}if(u)continue;e.domNode!==c[d+o].domNode.parentNode?(e.domNode.childNodes.length>d+r?e.domNode.replaceChild(c[d+o].domNode,e.domNode.childNodes[d+r]):e.domNode.appendChild(c[d+o].domNode),ce(c[d+o],n.childNodes[d+r])):a.push(d)}}else c[d+o].domNode=n.childNodes[d+r];else a.push(d+r)}for(d=i;d+o<l;d++)c[d+o].domNode&&e.domNode.appendChild(c[d+o].domNode);if(a.length>0)for(var m=a.length-1;m>=0;m--){var v=a[m];["BODY","HEAD"].includes(n.childNodes[v].nodeName)?n.replaceChild(e.children.first(function(e){return e.domNode.nodeName&&e.domNode.nodeName===n.childNodes[v].nodeName}).domNode,n.childNodes[v]):n.removeChild(n.childNodes[v])}if(i=n.childNodes.length,i>l)for(m=i-1;m>=l;m--)n.removeChild(n.childNodes[m]);if(l>i)for(m=i;m<l;m++)c[m].domNode&&!c[m].type&&n.appendChild(c[m].domNode);if(e.attributes)for(var N in e.attributes)k(e.domNode,e.attributes[N],!0)}e.domNode&&(e.domNode.usedByRenderer=!0)}return t},de=!1,le=!1,pe=function(e){if(e.childInstances)for(var n in e.childInstances)_(e.childInstances[n].wrapper),x(e.childInstances[n].wrapper),e.childInstances[n].root.childInstances&&pe(e.childInstances[n].root)},ue={},fe=!1,he=!1,me=!1,ve=0;this.render=function(n,t,o){if(!n)throw new Error("Component name is required.");if(!(n in e.components))throw new Error("Component "+n+" doesn't exist.");if(e.components[n].lazyLoad){var r=e.components[n].lazyLoad,i=VIEWI_PATH+"/"+r+".group.json"+VIEWI_VERSION,s=!1;ajax.get(i).then(function(r){for(var a in r)delete e.components[a].lazyLoad,e.components[a]=Object.assign(e.components[a],r[a]),a===n&&(s=!0);s?e.render(n,t,o):console.error('Component "'+n+'" was not found in the group: '+i)},function(){console.error("Failed to lazy load the component in the group: "+i)})}else{if(ue={},!o&&window[n]&&window[n]._beforeStart){var a=window[n]._beforeStart;if(a.length>0){var c=a.length-1,d=a[c],p=ee(d),u=function(){var o=!(arguments.length>0)||arguments[0];o&&(c>0?(c--,d=a[c],p=ee(d),p.run(u)):e.render(n,t,!0))};return void p.run(u)}}fe&&(he=!0);var f=function(){for(var e=0;e<ie.components.length;e++){var n=ie.components[e];n.instanceWrapper&&n.instanceWrapper.component&&n.instanceWrapper.component.__destroy&&n.instanceWrapper.component.__destroy()}};fe=!0,de=!1,z={},$={},te=null,he&&f(),ie=re,re={},re.name=n,re.components=[];var h=oe(n,null,null,t,!0),m=h.versions.main;re.nodes=m,le&&window.scrollTo(0,0),le=!0,A=!l;var v=l?{documentElement:document.createElement("html"),doctype:{}}:document;if(_(h.wrapper),me)return f(),void(me=!1);if(x(h.wrapper),me)return f(),void(me=!1);if(pe(h.root),me)return f(),void(me=!1);f(),ve++,B(v,{},m,!1);var N=m[1];for(var b in N||"dynamic"!==m[0].type||(N=m[0].children[0].children[1]),l&&ce(N,document.documentElement),ue)ue[b].component.__rendered&&ue[b].component.__rendered();fe=!1,he&&(he=!1,me=!0),ue={},A=!1,l=!1}},this.htmlentities=function(e){return e};var Ne=document.createElement("textarea");this.decode=function(e){return Ne.innerHTML=e,Ne.value}}