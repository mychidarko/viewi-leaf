function OnReady(n){var e=this;this.action=n,this.then=function(n,t){this.onOk=n,this.onError=t,this.action(function(n){e.onOk(n)},function(n){e.onError(n)})},this.catch=function(n){this.onError=n}}function isFile(n){return"File"in window&&n instanceof File}function isBlob(n){return"Blob"in window&&n instanceof Blob}var ajax={request:function(n,e,t,r){return new OnReady(function(i,o){var s=new XMLHttpRequest;if(s.onreadystatechange=function(){if(4===s.readyState){var n=s.status,e=s.getResponseHeader("Content-Type"),t=e&&0===e.indexOf("application/json"),r=s.responseText;t&&(r=JSON.parse(s.responseText)),0===n||n>=200&&n<400?i(r):o(r)}},s.open(n.toUpperCase(),e,!0),r&&r.headers)for(var a in r.headers)s.setRequestHeader(a,r.headers[a]);null!==t?s.send(isBlob(t)?t:JSON.stringify(t)):s.send()})},get:function(n,e){return ajax.request("GET",n,null,e)},post:function(n,e,t){return ajax.request("POST",n,e,t)},put:function(n,e,t){return ajax.request("PUT",n,e,t)},delete:function(n,e,t){return ajax.request("DELETE",n,e,t)}};