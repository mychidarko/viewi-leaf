var RouteItem=function(e,t,i,r){this.method=e,this.url=t,this.action=i,this.wheres={},r&&(this.wheres=r),this.where=function(e,t){return null!==e&&"object"==typeof e?this.wheres=Object.assign(this.where,e):t&&(this.wheres[e]=t),this}},Router=function(){var e=[],t=/^\/|\/$/g;this.setRoutes=function(t){e=t},this.register=function(t,i,r){var s=new RouteItem(t.toLowerCase(),i,r);return e.push(s),s},this.get=function(e,t){return this.register("get",e,t)},this.resolve=function(i){i=i.replace(t,"");var r=i.split("/");for(var s in e){for(var n={},h=!0,a=e[s],f=a.url.replace(t,""),l=f.split("/"),u=0,o=!1;u<l.length;u++){var c=l[u],g=-1!==c.indexOf("*");if(g){var v=c.slice(0,-1);if(!v||0===r[u].indexOf(v)){o=!0;break}}var w=-1!==c.indexOf("{");if(c!==r[u]&&!w){h=!1;break}if(w){var p=c.split(/[{}]+/),b=p[1];if("?"===b[b.length-1])b=b.slice(0,-1);else if(u>=r.length){h=!1;break}if(-1!==b.indexOf("<")){var x=/<([^>]+)>/.exec(b);b=b.replace(/<([^>]+)>/g,""),a.wheres[b]=x[1]}if(a.wheres[b]){var d=new RegExp(a.wheres[b],"g");if(!d.test(r[u])){h=!1;break}d.lastIndex=0,d.test("/")&&(o=!0)}var k=u<r.length?r[u]:null;if(p[0]){if(0!==k.indexOf(p[0])){h=!1;break}k=k.slice(p[0].length)}if(n[b]=k,o){n[b]=r.slice(u).join("/");break}}}if(u<r.length&&!o&&(h=!1),h)return{item:a,params:n}}return null}};